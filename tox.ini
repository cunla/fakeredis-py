[tox]
envlist =
    py{39,310,311,312,313,314}
isolated_build = True

[testenv]
allowlist_externals =
    uv
    podman

usedevelop = True
passenv = DOCKER_HOST
commands =
    uv sync --all-extras
    podman run -d -p 6390:6379 --name redis8fakeredis redis:8.4.0
    uv run pytest -v
    podman stop redis8fakeredis
    podman rm redis8fakeredis
